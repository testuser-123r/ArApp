<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Interaktives AR-Ball Beispiel</title>
  <!-- A-Frame Bibliothek -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <!-- AR.js fÃ¼r A-Frame -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.3.2/aframe/build/aframe-ar.min.js"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      width: 100%;
      background-color: #000; /* Hintergrund schwarz fÃ¼r besseren Kontrast */
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 5px;
      font-family: Arial, sans-serif;
      z-index: 1;
    }
    #info {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 5px;
      font-family: Arial, sans-serif;
      z-index: 1;
    }
  </style>
</head>
<body>
  <!-- Punktestand Anzeige -->
  <div id="score">Punkte: 0</div>

  <!-- AR-Szene -->
  <a-scene 
    embedded 
    arjs="sourceType: webcam; debugUIEnabled: false;" 
    renderer="logarithmicDepthBuffer: true; colorManagement: true;"
    vr-mode-ui="enabled: false"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
  >
    <!-- Lichtquellen -->
    <a-entity light="type: ambient; color: #FFFFFF"></a-entity>
    <a-entity light="type: directional; color: #FFFFFF; intensity: 0.5" position="0 1 1"></a-entity>

    <!-- Hiro-Marker -->
    <a-marker preset="hiro" id="marker">
      <!-- Interaktiver Ball -->
      <a-sphere 
        id="ball" 
        position="0 0.5 0" 
        radius="0.5" 
        color="#FF0000"
        animation__rotate="property: rotation; to: 0 360 0; loop: true; dur: 2000; easing: linear"
        class="clickable"
      ></a-sphere>
    </a-marker>

    <!-- Kamera -->
    <a-entity camera></a-entity>
  </a-scene>

  <!-- Benutzerhinweise -->
  <div id="info">
    ðŸ“· Richte deine Kamera auf den Hiro-Marker und klicke/tippe auf den Ball, um ihn wegzuschlagen!
  </div>

  <script>
    // Punktestand initialisieren
    let score = 0;
    const scoreElement = document.getElementById('score');

    // Funktion zur Aktualisierung des Punktestands
    function updateScore() {
      score += 1;
      scoreElement.textContent = 'Punkte: ' + score;
    }

    // Funktion zum Erzeugen eines neuen Balls
    function spawnBall() {
      const marker = document.getElementById('marker');
      const existingBall = document.getElementById('ball');

      if (existingBall) {
        // Entferne den bestehenden Ball
        existingBall.parentNode.removeChild(existingBall);
      }

      // Erzeuge einen neuen Ball
      const newBall = document.createElement('a-sphere');
      newBall.setAttribute('id', 'ball');
      newBall.setAttribute('position', '0 0.5 0');
      newBall.setAttribute('radius', '0.5');
      newBall.setAttribute('color', '#FF0000');
      newBall.setAttribute('animation__rotate', 'property: rotation; to: 0 360 0; loop: true; dur: 2000; easing: linear');
      newBall.setAttribute('class', 'clickable');

      // Event Listener fÃ¼r Klicks/Taps hinzufÃ¼gen
      newBall.addEventListener('click', () => {
        updateScore();
        spawnBall();
      });

      // FÃ¼ge den neuen Ball zum Marker hinzu
      marker.appendChild(newBall);
    }

    // Warte, bis das DOM geladen ist
    document.addEventListener('DOMContentLoaded', () => {
      const marker = document.getElementById('marker');

      // Event Listener fÃ¼r Marker-Erkennung hinzufÃ¼gen
      marker.addEventListener('markerFound', () => {
        console.log('Marker gefunden');
        spawnBall();
      });

      marker.addEventListener('markerLost', () => {
        console.log('Marker verloren');
        const existingBall = document.getElementById('ball');
        if (existingBall) {
          existingBall.parentNode.removeChild(existingBall);
        }
      });
    });
  </script>
</body>
</html>




