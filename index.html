<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Interaktives AR-Ball Beispiel</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.3.2/aframe/build/aframe-ar.min.js"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      width: 100%;
      /* Entfernt den schwarzen Hintergrund */
      background-color: transparent;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      background: rgba(0,0,0,0.5);
      padding: 10px;
      border-radius: 5px;
      font-family: Arial, sans-serif;
      z-index: 1;
    }
  </style>
</head>
<body>
  <!-- Anzeige fÃ¼r den Punktestand -->
  <div id="score">Punkte: 0</div>

  <a-scene 
    embedded 
    arjs="sourceType: webcam; debugUIEnabled: false;" 
    renderer="logarithmicDepthBuffer: true;"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
  >
    <!-- Lichtquelle -->
    <a-entity light="type: ambient; color: #FFFFFF"></a-entity>
    <a-entity light="type: directional; color: #FFFFFF; intensity: 0.5" position="0 1 1"></a-entity>

    <!-- Marker -->
    <a-marker preset="hiro" id="marker">
      <!-- Ball -->
      <a-sphere 
        id="ball" 
        position="0 0.5 0" 
        radius="0.5" 
        color="#FF0000"
        animation__rotate="property: rotation; to: 0 360 0; loop: true; dur: 2000; easing: linear"
        class="clickable"
      ></a-sphere>
    </a-marker>

    <!-- Kamera -->
    <a-entity camera></a-entity>
  </a-scene>

  <!-- Hinweis fÃ¼r den Benutzer -->
  <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: white; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; font-family: Arial, sans-serif; z-index: 1;">
    ðŸ“· Richte deine Kamera auf einen Hiro-Marker und klicke/tippe auf den Ball, um ihn wegzuschlagen!
  </div>

  <script>
    // Initialisiere Punktestand
    let score = 0;
    const scoreElement = document.getElementById('score');

    // Funktion zum Aktualisieren des Punktestands
    function updateScore() {
      score += 1;
      scoreElement.textContent = 'Punkte: ' + score;
    }

    // Funktion zum Erzeugen eines neuen Balls
    function spawnBall() {
      const marker = document.getElementById('marker');
      const existingBall = document.getElementById('ball');

      if (existingBall) {
        // Entferne den bestehenden Ball
        existingBall.setAttribute('visible', 'false');
        existingBall.parentNode.removeChild(existingBall);
      }

      // Erzeuge einen neuen Ball
      const newBall = document.createElement('a-sphere');
      newBall.setAttribute('id', 'ball');
      newBall.setAttribute('position', '0 0.5 0');
      newBall.setAttribute('radius', '0.5');
      newBall.setAttribute('color', '#FF0000');
      newBall.setAttribute('animation__rotate', 'property: rotation; to: 0 360 0; loop: true; dur: 2000; easing: linear');
      newBall.setAttribute('class', 'clickable');

      // FÃ¼ge einen Event-Listener fÃ¼r Klicks/Taps hinzu
      newBall.addEventListener('click', () => {
        // Aktualisiere den Punktestand
        updateScore();
        // Erzeuge einen neuen Ball
        spawnBall();
      });

      // FÃ¼ge den neuen Ball zum Marker hinzu
      marker.appendChild(newBall);
    }

    // Warte, bis das A-Frame geladen ist
    document.addEventListener('DOMContentLoaded', () => {
      // FÃ¼ge einen Event-Listener hinzu, der ausgelÃ¶st wird, wenn der Marker erkannt wird
      const marker = document.getElementById('marker');
      marker.addEventListener('markerFound', () => {
        // Spawne den ersten Ball
        spawnBall();
      });

      marker.addEventListener('markerLost', () => {
        // Entferne den Ball, wenn der Marker nicht mehr sichtbar ist
        const existingBall = document.getElementById('ball');
        if (existingBall) {
          existingBall.parentNode.removeChild(existingBall);
        }
      });
    });
  </script>
</body>
</html>




